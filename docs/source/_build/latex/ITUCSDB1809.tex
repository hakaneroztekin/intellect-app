%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
\edef\sphinxdqmaybe{\ifdefined\DeclareUnicodeCharacterAsOptional\string"\fi}
  \DeclareUnicodeCharacter{\sphinxdqmaybe00A0}{\nobreakspace}
  \DeclareUnicodeCharacter{\sphinxdqmaybe2500}{\sphinxunichar{2500}}
  \DeclareUnicodeCharacter{\sphinxdqmaybe2502}{\sphinxunichar{2502}}
  \DeclareUnicodeCharacter{\sphinxdqmaybe2514}{\sphinxunichar{2514}}
  \DeclareUnicodeCharacter{\sphinxdqmaybe251C}{\sphinxunichar{251C}}
  \DeclareUnicodeCharacter{\sphinxdqmaybe2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}
\usepackage{times}
\usepackage[Bjarne]{fncychap}
\usepackage{sphinx}

\fvset{fontsize=\small}
\usepackage{geometry}

% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\addto\captionsenglish{\renewcommand{\figurename}{Fig.}}
\addto\captionsenglish{\renewcommand{\tablename}{Table}}
\addto\captionsenglish{\renewcommand{\literalblockname}{Listing}}

\addto\captionsenglish{\renewcommand{\literalblockcontinuedname}{continued from previous page}}
\addto\captionsenglish{\renewcommand{\literalblockcontinuesname}{continues on next page}}
\addto\captionsenglish{\renewcommand{\sphinxnonalphabeticalgroupname}{Non-alphabetical}}
\addto\captionsenglish{\renewcommand{\sphinxsymbolsname}{Symbols}}
\addto\captionsenglish{\renewcommand{\sphinxnumbersname}{Numbers}}

\addto\extrasenglish{\def\pageautorefname{page}}

\setcounter{tocdepth}{0}



\title{ITUCSDB1809 Documentation}
\date{Dec 28, 2018}
\release{}
\author{ITUCSDB1809}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{}
\makeindex
\begin{document}

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}

\begin{quote}\begin{description}
\item[{Team}] \leavevmode
Intellect

\item[{Members}] \leavevmode\begin{itemize}
\item {} 
Hakan Eröztekin

\end{itemize}

\end{description}\end{quote}

Keep your favorite musics and movies in Intellect.
Intellect keeps each users favorites and also community favorites.
Each user can contribute to community lists, as in Wikipedia.
Then user can pick their favorites in that list to shape his/her own list.

There are a different community lists for movies and musics.
Users can add, update or delete elements in community lists and changes
are reflected to the user lists. User can also shape his/her own list by
adding or deleting items from his/her lists.

Contents:


\chapter{User Guide}
\label{\detokenize{user/index:user-guide}}\label{\detokenize{user/index::doc}}
As a visitor of Intellect, you are welcomed with the homepage.

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{homepage}.png}
\end{figure}


\section{Authentication}
\label{\detokenize{user/index:authentication}}
You should sign up to get full benefit of Intellect. For that, you should visit the sign up page.

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.8]{{signup}.png}
\end{figure}

With a successful sign-up you are redirected to the sign-in page.

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{signin}.png}
\end{figure}


\section{Movies \& User Lists}
\label{\detokenize{user/index:movies-user-lists}}
After the sign-in now you can start using Intellect. Initially, your lists are empty as it is shown below.

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{mylists-empty}.png}
\end{figure}

Now it’s time to visit the community movies/musics. Let’s start with movies. Don’t forget that the very similar operations
are applied for musics.

As an Intellect user, you are more than free to contribute the community movies.
Here you can add, update or delete the movies you wish.

Let’s start by adding a movie.

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{movies-add}.png}
\end{figure}

And here it is in the Community Movies,

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{community-movies}.png}
\end{figure}

We can add more movies,

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{movies-add2}.png}
\end{figure}

Our community list is growing,
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{community-movies2}.png}
\end{figure}
\end{quote}

We can update community movies,
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{movies-update}.png}
\end{figure}
\end{quote}

Here is the result,
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{community-movies3}.png}
\end{figure}
\end{quote}

We can delete movies too,
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{movies-delete}.png}
\end{figure}
\end{quote}

Here is our updated list,
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{community-movies4}.png}
\end{figure}
\end{quote}

Now that we have existing movies in the Community Movies we can add it to our own Movies list.
Just clicking the Add button is enough. Let’s add Venom to our list,
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{add-to-mylists}.png}
\end{figure}
\end{quote}

And here is our list;
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{userlist1}.png}
\end{figure}
\end{quote}

That’s all for the usage of Intellect. If you want more information, you can find similar operations done in Musics list from now on,
Also, you can delete your favorites by clicking the Delete button. In addition, you can delete from community lists which’ll be cascaded to the user lists.
These’ll be shown in the next section.


\section{Musics}
\label{\detokenize{user/index:musics}}
Let’s add couple of music;
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{add-musics}.png}
\end{figure}
\end{quote}

Here we go, this is the Community Musics now;
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{community-musics}.png}
\end{figure}
\end{quote}

We can also update/delete musics from the list;
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{musics-update-and-delete}.png}
\end{figure}
\end{quote}

Here is the result,
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{community-musics2}.png}
\end{figure}
\end{quote}

We can “Add” couple of musics to our lists;
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{mylists-filled}.png}
\end{figure}
\end{quote}

We can even “Delete” musics from our lists. Let’s do it in “Everything Black”,
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{delete-music}.png}
\end{figure}
\end{quote}

What happens to user lists when we delete the existing items from the community lists?
Here we go. As a reminder, here is the last situation of our list;
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{delete-music}.png}
\end{figure}
\end{quote}

Let’s delete two music. One is existing in the user list, one is not,
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{delete-from-community-musics}.png}
\end{figure}
\end{quote}

Here is the final result:
\begin{quote}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=0.5]{{userlist2}.png}
\end{figure}
\end{quote}


\chapter{Developer Guide}
\label{\detokenize{developer/index:developer-guide}}\label{\detokenize{developer/index::doc}}

\section{Database Design}
\label{\detokenize{developer/index:database-design}}
There are three main tables; \sphinxstylestrong{USERS, MOVIE} and \sphinxstylestrong{MUSIC}.
USERS table is designed to keep the information for user. MOVIE table is for movies, and MUSIC table is for musics.
There are also two additional tables; \sphinxstylestrong{MOVIE\_LIST} and \sphinxstylestrong{MUSIC\_LIST}. These are designed to keep user’s favorited musics/movies.
These keep ID’s for USER and MOVIE/MUSIC.

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[scale=1.0]{{ERdiagram}.png}
\end{figure}


\section{Code}
\label{\detokenize{developer/index:code}}
The code can be explained in three parts.
\begin{itemize}
\item {} 
Python \& SQL

\item {} 
HTML/CSS

\end{itemize}


\section{Python \& SQL}
\label{\detokenize{developer/index:python-sql}}
There are the following python(.py) files;
\begin{itemize}
\item {} 
server.py

\item {} 
models.py

\item {} 
dbinit.py

\item {} 
forms.py

\item {} 
db\_table\_operations.py

\item {} 
config.py

\end{itemize}

\sphinxstylestrong{server.py}

This is the main python file for the project. It renders pages,
initializes and transfers variables and realizes methods with necessary HTML requests.

Firstly, the following packages are imported.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{from} \PYG{n+nn}{flask} \PYG{k+kn}{import} \PYG{n}{Flask}\PYG{p}{,} \PYG{n}{render\PYGZus{}template}\PYG{p}{,} \PYG{n}{request}\PYG{p}{,} \PYG{n}{redirect}
\PYG{k+kn}{from} \PYG{n+nn}{flask\PYGZus{}bootstrap} \PYG{k+kn}{import} \PYG{n}{Bootstrap}
\PYG{k+kn}{from} \PYG{n+nn}{flask\PYGZus{}login} \PYG{k+kn}{import} \PYG{n}{login\PYGZus{}user}\PYG{p}{,} \PYG{n}{LoginManager}

\PYG{k+kn}{from} \PYG{n+nn}{forms} \PYG{k+kn}{import} \PYG{o}{*}
\PYG{k+kn}{from} \PYG{n+nn}{config} \PYG{k+kn}{import} \PYG{n}{Config}
\PYG{k+kn}{from} \PYG{n+nn}{db\PYGZus{}table\PYGZus{}operations} \PYG{k+kn}{import} \PYG{o}{*}
\PYG{k+kn}{from} \PYG{n+nn}{werkzeug.security} \PYG{k+kn}{import} \PYG{n}{generate\PYGZus{}password\PYGZus{}hash}
\end{sphinxVerbatim}

Then configuration, bootstrap and LoginManager is initialized. LoginManager is used for authentication.
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{app} \PYG{o}{=} \PYG{n}{Flask}\PYG{p}{(}\PYG{n+nv+vm}{\PYGZus{}\PYGZus{}name\PYGZus{}\PYGZus{}}\PYG{p}{)}
\PYG{n}{app}\PYG{o}{.}\PYG{n}{config}\PYG{o}{.}\PYG{n}{from\PYGZus{}object}\PYG{p}{(}\PYG{n}{Config}\PYG{p}{)}
\PYG{n}{Bootstrap}\PYG{p}{(}\PYG{n}{app}\PYG{p}{)}

\PYG{n}{login} \PYG{o}{=} \PYG{n}{LoginManager}\PYG{p}{(}\PYG{n}{app}\PYG{p}{)}
\end{sphinxVerbatim}
\end{quote}

The rest of the server.py works for routes.
For example, this renders homepage.html when main route (“/”) is accessed.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nd}{@app.route}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{/}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{k}{def} \PYG{n+nf}{home\PYGZus{}page}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{homepage.html}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

For the sign-up operation, route and necessary HTML requests are announced. Then a form is created
(forms will be discussed in the forms.py). When user clicks to the “Register” button, then a new
user object is created with information provided by the user.
Then the user object is sent to insert\_user which will work to insert user to the USERS table.
With a successful sign-up operation, users are redirected to the signin page.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nd}{@app.route}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/signup}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{methods}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{GET}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
\PYG{k}{def} \PYG{n+nf}{signup\PYGZus{}page}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{form} \PYG{o}{=} \PYG{n}{RegistrationForm}\PYG{p}{(}\PYG{n}{request}\PYG{o}{.}\PYG{n}{form}\PYG{p}{)}
    \PYG{k}{if} \PYG{n}{request}\PYG{o}{.}\PYG{n}{method} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o+ow}{and} \PYG{n}{form}\PYG{o}{.}\PYG{n}{validate}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
        \PYG{n}{user} \PYG{o}{=} \PYG{n}{User}\PYG{p}{(}\PYG{n}{form}\PYG{o}{.}\PYG{n}{username}\PYG{o}{.}\PYG{n}{data}\PYG{p}{,} \PYG{n}{form}\PYG{o}{.}\PYG{n}{name}\PYG{o}{.}\PYG{n}{data}\PYG{p}{,} \PYG{n}{form}\PYG{o}{.}\PYG{n}{surname}\PYG{o}{.}\PYG{n}{data}\PYG{p}{,} \PYG{n}{form}\PYG{o}{.}\PYG{n}{email}\PYG{o}{.}\PYG{n}{data}\PYG{p}{,}
                    \PYG{n}{form}\PYG{o}{.}\PYG{n}{password}\PYG{o}{.}\PYG{n}{data}\PYG{p}{,} \PYG{n}{form}\PYG{o}{.}\PYG{n}{age}\PYG{o}{.}\PYG{n}{data}\PYG{p}{,} \PYG{n}{form}\PYG{o}{.}\PYG{n}{gender}\PYG{o}{.}\PYG{n}{data}\PYG{p}{)}
        \PYG{n}{insert\PYGZus{}user}\PYG{p}{(}\PYG{n}{user}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{redirect}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/signin}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\end{sphinxVerbatim}

The similar operations are realized for sign in; route, HTML requests and form.
When user clicks “Sign in” button, find\_user\_by\_username method runs a SQL query
to find the username in the database. If it can, Flask Login app is informed about the
signed up user. The username is also shown in the menu bar at Mylists page.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nd}{@app.route}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/signin}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{methods}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{GET}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
\PYG{k}{def} \PYG{n+nf}{signin\PYGZus{}page}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{form} \PYG{o}{=} \PYG{n}{LoginForm}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{if} \PYG{n}{form}\PYG{o}{.}\PYG{n}{validate\PYGZus{}on\PYGZus{}submit}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
        \PYG{n}{found\PYGZus{}user} \PYG{o}{=} \PYG{n}{find\PYGZus{}user\PYGZus{}by\PYGZus{}username}\PYG{p}{(}\PYG{n}{form}\PYG{o}{.}\PYG{n}{username}\PYG{o}{.}\PYG{n}{data}\PYG{p}{)}
        \PYG{n}{user} \PYG{o}{=} \PYG{n}{User}\PYG{p}{(}\PYG{n}{found\PYGZus{}user}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,} \PYG{n}{found\PYGZus{}user}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{p}{,} \PYG{n}{found\PYGZus{}user}\PYG{p}{[}\PYG{l+m+mi}{3}\PYG{p}{]}\PYG{p}{,} \PYG{n}{found\PYGZus{}user}\PYG{p}{[}\PYG{l+m+mi}{4}\PYG{p}{]}\PYG{p}{,}
                    \PYG{n}{found\PYGZus{}user}\PYG{p}{[}\PYG{l+m+mi}{5}\PYG{p}{]}\PYG{p}{,} \PYG{n}{found\PYGZus{}user}\PYG{p}{[}\PYG{l+m+mi}{6}\PYG{p}{]}\PYG{p}{,} \PYG{n}{found\PYGZus{}user}\PYG{p}{[}\PYG{l+m+mi}{7}\PYG{p}{]}\PYG{p}{)}
        \PYG{n}{user}\PYG{o}{.}\PYG{n}{set\PYGZus{}id}\PYG{p}{(}\PYG{n}{found\PYGZus{}user}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)} \PYG{c+c1}{\PYGZsh{} to load user id}
        \PYG{k}{if} \PYG{n}{user} \PYG{o+ow}{is} \PYG{n+nb+bp}{None} \PYG{o+ow}{or} \PYG{o+ow}{not} \PYG{n}{check\PYGZus{}password}\PYG{p}{(}\PYG{n}{user}\PYG{o}{.}\PYG{n}{password}\PYG{p}{,} \PYG{n}{form}\PYG{o}{.}\PYG{n}{password}\PYG{o}{.}\PYG{n}{data}\PYG{p}{)}\PYG{p}{:}
            \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{User signing failed}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{redirect}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/signin}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
        \PYG{n}{login\PYGZus{}user}\PYG{p}{(}\PYG{n}{user}\PYG{p}{,} \PYG{n}{remember}\PYG{o}{=}\PYG{n}{form}\PYG{o}{.}\PYG{n}{remember\PYGZus{}me}\PYG{o}{.}\PYG{n}{data}\PYG{p}{)}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{User signed successfully}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{redirect}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/mylists}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
    \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{signin.html}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{form}\PYG{o}{=}\PYG{n}{form}\PYG{p}{)}
\end{sphinxVerbatim}

From this point on, there are the following methods left in the server.py;
\begin{itemize}
\item {} 
mylists

\item {} 
movies (add/update/delete)

\item {} 
musics (add/update/delete)

\end{itemize}

Operations for movies and musics are very similar.
For the sake of simplicity, mylists and movies will be discussed.

Mylists page tries to get elements from user’s own lists as a first step.
If there is any element exists, it shows them.

Also, mylists page has “Delete” button for items in the user’s list.
When it is clicked, it takes the related elements id (music or movie)
and user’s id. Then it sends it to delete\_movie (delete\_music for music) operation
to run SQL query to delete it from the database.

As it can be noticed, mylists page provides user\_movies and user\_musics variables
while it is rendering the html file. These variables are going to be processed
with the html file to fill the tables.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nd}{@app.route}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/mylists}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{methods}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{GET}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
\PYG{k}{def} \PYG{n+nf}{mylists\PYGZus{}page}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{user\PYGZus{}movies} \PYG{o}{=} \PYG{n}{userlist\PYGZus{}get\PYGZus{}movies}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{user\PYGZus{}musics} \PYG{o}{=} \PYG{n}{userlist\PYGZus{}get\PYGZus{}musics}\PYG{p}{(}\PYG{p}{)}

    \PYG{k}{if} \PYG{n}{request}\PYG{o}{.}\PYG{n}{method} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{:}
        \PYG{n}{movie\PYGZus{}id} \PYG{o}{=} \PYG{n}{request}\PYG{o}{.}\PYG{n}{form}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{movie\PYGZus{}id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
        \PYG{n}{user\PYGZus{}id} \PYG{o}{=} \PYG{n}{request}\PYG{o}{.}\PYG{n}{form}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{user\PYGZus{}id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
        \PYG{n}{music\PYGZus{}id} \PYG{o}{=} \PYG{n}{request}\PYG{o}{.}\PYG{n}{form}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{music\PYGZus{}id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}

        \PYG{k}{if} \PYG{n}{movie\PYGZus{}id} \PYG{o}{!=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{0}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}  \PYG{c+c1}{\PYGZsh{} request to delete movie}
            \PYG{n}{userlist\PYGZus{}delete\PYGZus{}movie}\PYG{p}{(}\PYG{n}{user\PYGZus{}id}\PYG{p}{,} \PYG{n}{movie\PYGZus{}id}\PYG{p}{)}
            \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{delete movie with id }\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{+} \PYG{n}{movie\PYGZus{}id}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{redirect}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/mylists}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}

        \PYG{k}{elif} \PYG{n}{music\PYGZus{}id} \PYG{o}{!=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{0}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}  \PYG{c+c1}{\PYGZsh{} request to delete music}
            \PYG{n}{userlist\PYGZus{}delete\PYGZus{}music}\PYG{p}{(}\PYG{n}{user\PYGZus{}id}\PYG{p}{,} \PYG{n}{music\PYGZus{}id}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{redirect}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/mylists}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}

    \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mylists.html}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                           \PYG{n}{user\PYGZus{}movies}\PYG{o}{=}\PYG{n}{user\PYGZus{}movies}\PYG{p}{,}
                           \PYG{n}{user\PYGZus{}musics}\PYG{o}{=}\PYG{n}{user\PYGZus{}musics}\PYG{p}{)}
\end{sphinxVerbatim}

Movies page works similarly with the mylists page. It shows the movies in the MOVIE table in sorted order.
It has “Add” button for user to add the selected movie to his/her lists.
Added elements are going to be shown in users list in mylists page.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{movies\PYGZus{}page}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{movies} \PYG{o}{=} \PYG{n}{get\PYGZus{}movies}\PYG{p}{(}\PYG{p}{)}

    \PYG{k}{if} \PYG{n}{request}\PYG{o}{.}\PYG{n}{method} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{:}
        \PYG{n}{movie\PYGZus{}id} \PYG{o}{=} \PYG{n}{request}\PYG{o}{.}\PYG{n}{form}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{movie\PYGZus{}id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
        \PYG{n}{user\PYGZus{}id} \PYG{o}{=} \PYG{n}{request}\PYG{o}{.}\PYG{n}{form}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{user\PYGZus{}id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}
        \PYG{n}{userlist\PYGZus{}add\PYGZus{}movie}\PYG{p}{(}\PYG{n}{user\PYGZus{}id}\PYG{p}{,} \PYG{n}{movie\PYGZus{}id}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{redirect}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/mylists}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}

    \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{movies.html}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{movies}\PYG{o}{=}\PYG{n+nb}{sorted}\PYG{p}{(}\PYG{n}{movies}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

Adding a movie is fairly simple and similar to the user sign up operation.
It works with MovieAddForm and creates a movie object with provided information.
Then to run SQL query, it sends the movie object to insert\_movie() method.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nd}{@app.route}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/mylists/movies/add}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{methods}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{GET}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
\PYG{k}{def} \PYG{n+nf}{movies\PYGZus{}add\PYGZus{}page}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{form} \PYG{o}{=} \PYG{n}{MovieAddForm}\PYG{p}{(}\PYG{n}{request}\PYG{o}{.}\PYG{n}{form}\PYG{p}{)}
    \PYG{k}{if} \PYG{n}{request}\PYG{o}{.}\PYG{n}{method} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o+ow}{and} \PYG{n}{form}\PYG{o}{.}\PYG{n}{validate}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
        \PYG{n}{movie} \PYG{o}{=} \PYG{n}{Movie}\PYG{p}{(}\PYG{n}{form}\PYG{o}{.}\PYG{n}{title}\PYG{o}{.}\PYG{n}{data}\PYG{p}{,} \PYG{n}{form}\PYG{o}{.}\PYG{n}{year}\PYG{o}{.}\PYG{n}{data}\PYG{p}{,} \PYG{n}{form}\PYG{o}{.}\PYG{n}{duration\PYGZus{}in\PYGZus{}minutes}\PYG{o}{.}\PYG{n}{data}\PYG{p}{,}
                      \PYG{n}{form}\PYG{o}{.}\PYG{n}{director}\PYG{o}{.}\PYG{n}{data}\PYG{p}{,} \PYG{n}{form}\PYG{o}{.}\PYG{n}{genre}\PYG{o}{.}\PYG{n}{data}\PYG{p}{)}
        \PYG{n}{insert\PYGZus{}movie}\PYG{p}{(}\PYG{n}{movie}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{redirect}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/mylists/movies}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
    \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{add\PYGZus{}movies.html}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{form}\PYG{o}{=}\PYG{n}{form}\PYG{p}{)}
\end{sphinxVerbatim}

Movie update page also gets id to be deleted.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{movies\PYGZus{}update\PYGZus{}page}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{form} \PYG{o}{=} \PYG{n}{MovieUpdateForm}\PYG{p}{(}\PYG{n}{request}\PYG{o}{.}\PYG{n}{form}\PYG{p}{)}
    \PYG{k}{if} \PYG{n}{request}\PYG{o}{.}\PYG{n}{method} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o+ow}{and} \PYG{n}{form}\PYG{o}{.}\PYG{n}{validate}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
        \PYG{n}{movie} \PYG{o}{=} \PYG{n}{Movie}\PYG{p}{(}\PYG{n}{form}\PYG{o}{.}\PYG{n}{title}\PYG{o}{.}\PYG{n}{data}\PYG{p}{,} \PYG{n}{form}\PYG{o}{.}\PYG{n}{year}\PYG{o}{.}\PYG{n}{data}\PYG{p}{,} \PYG{n}{form}\PYG{o}{.}\PYG{n}{duration\PYGZus{}in\PYGZus{}minutes}\PYG{o}{.}\PYG{n}{data}\PYG{p}{,}
                      \PYG{n}{form}\PYG{o}{.}\PYG{n}{director}\PYG{o}{.}\PYG{n}{data}\PYG{p}{,} \PYG{n}{form}\PYG{o}{.}\PYG{n}{genre}\PYG{o}{.}\PYG{n}{data}\PYG{p}{)}
        \PYG{n}{movie\PYGZus{}id} \PYG{o}{=} \PYG{n}{form}\PYG{o}{.}\PYG{n}{id}\PYG{o}{.}\PYG{n}{data}  \PYG{c+c1}{\PYGZsh{} which movie to update}
        \PYG{n}{update\PYGZus{}movie}\PYG{p}{(}\PYG{n}{movie\PYGZus{}id}\PYG{p}{,} \PYG{n}{movie}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{redirect}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/mylists/movies}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}

    \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{update\PYGZus{}movies.html}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{form}\PYG{o}{=}\PYG{n}{form}\PYG{p}{)}
\end{sphinxVerbatim}

Movie delete page gets id that will be deleted from the database table, MOVIE.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{movies\PYGZus{}delete\PYGZus{}page}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{form} \PYG{o}{=} \PYG{n}{MovieDeleteForm}\PYG{p}{(}\PYG{n}{request}\PYG{o}{.}\PYG{n}{form}\PYG{p}{)}
    \PYG{n+nb}{id} \PYG{o}{=} \PYG{n}{form}\PYG{o}{.}\PYG{n}{movie\PYGZus{}id}\PYG{o}{.}\PYG{n}{data}
    \PYG{k}{if} \PYG{n+nb}{id}\PYG{o}{.}\PYG{n+nf+fm}{\PYGZus{}\PYGZus{}len\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{p}{)} \PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{0}\PYG{p}{:}
        \PYG{n}{delete\PYGZus{}movie}\PYG{p}{(}\PYG{n+nb}{id}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{redirect}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/mylists/movies}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
    \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{delete\PYGZus{}movies.html}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{form}\PYG{o}{=}\PYG{n}{form}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxstylestrong{models.py}
models.py includes User, Movie and Music classes.

The most technical part is about the login. initialize\_login method is
implemented as a solution for circular import between server.py and models.py
After the initialization of “login”, it is used to load users. This is related with Flask’s LoginManager package.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{initialize\PYGZus{}login}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{k+kn}{from} \PYG{n+nn}{server} \PYG{k+kn}{import} \PYG{n}{login}
    \PYG{k}{global} \PYG{n}{login}
    \PYG{n}{login} \PYG{o}{=} \PYG{n}{login}

\PYG{k}{class} \PYG{n+nc}{User}\PYG{p}{(}\PYG{n}{UserMixin}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{initialize\PYGZus{}login}\PYG{p}{(}\PYG{p}{)}

    \PYG{k}{def} \PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{username}\PYG{p}{,} \PYG{n}{name}\PYG{p}{,} \PYG{n}{surname}\PYG{p}{,} \PYG{n}{email}\PYG{p}{,} \PYG{n}{password}\PYG{p}{,} \PYG{n}{age}\PYG{p}{,} \PYG{n}{gender}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{id} \PYG{o}{=} \PYG{l+m+mi}{0}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{username} \PYG{o}{=} \PYG{n}{username}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{name} \PYG{o}{=} \PYG{n}{name}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{surname} \PYG{o}{=} \PYG{n}{surname}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{email} \PYG{o}{=} \PYG{n}{email}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{password} \PYG{o}{=} \PYG{n}{password}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{age} \PYG{o}{=} \PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{age}\PYG{p}{)}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{gender} \PYG{o}{=} \PYG{n}{gender}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{User object created}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

    \PYG{n+nd}{@login.user\PYGZus{}loader}
    \PYG{k}{def} \PYG{n+nf}{load\PYGZus{}user}\PYG{p}{(}\PYG{n+nb}{id}\PYG{p}{)}\PYG{p}{:}
        \PYG{k}{if} \PYG{n+nb}{id} \PYG{o}{==} \PYG{l+m+mi}{0}\PYG{p}{:}
            \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{User not logged in, id is }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n+nb}{id}\PYG{p}{)}
            \PYG{k}{return}
        \PYG{k}{else}\PYG{p}{:}
            \PYG{n}{found\PYGZus{}user} \PYG{o}{=} \PYG{n}{find\PYGZus{}user\PYGZus{}by\PYGZus{}id}\PYG{p}{(}\PYG{n+nb}{int}\PYG{p}{(}\PYG{n+nb}{id}\PYG{p}{)}\PYG{p}{)}
            \PYG{k}{return} \PYG{n}{found\PYGZus{}user}

    \PYG{k}{def} \PYG{n+nf+fm}{\PYGZus{}\PYGZus{}repr\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
        \PYG{k}{return} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZlt{}User }\PYG{l+s+si}{\PYGZpc{}r}\PYG{l+s+s1}{\PYGZgt{}}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZpc{}} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{username}

    \PYG{k}{def} \PYG{n+nf}{set\PYGZus{}id}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n+nb}{id}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{id} \PYG{o}{=} \PYG{n+nb}{id}

    \PYG{k}{def} \PYG{n+nf}{get\PYGZus{}id}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{)}\PYG{p}{:}
        \PYG{k}{return} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{id}\PYG{p}{;}

\PYG{k}{class} \PYG{n+nc}{Music}\PYG{p}{:}
    \PYG{k}{def} \PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{name}\PYG{p}{,} \PYG{n}{genre}\PYG{p}{,} \PYG{n}{duration\PYGZus{}in\PYGZus{}seconds}\PYG{p}{,} \PYG{n}{singer}\PYG{p}{,} \PYG{n}{year}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{name}\PYG{o}{=} \PYG{n}{name}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{genre} \PYG{o}{=} \PYG{n}{genre}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{duration\PYGZus{}in\PYGZus{}seconds} \PYG{o}{=} \PYG{n}{duration\PYGZus{}in\PYGZus{}seconds}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{singer} \PYG{o}{=} \PYG{n}{singer}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{year} \PYG{o}{=} \PYG{n}{year}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Music object created}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}


\PYG{k}{class} \PYG{n+nc}{Movie}\PYG{p}{:}
    \PYG{k}{def} \PYG{n+nf+fm}{\PYGZus{}\PYGZus{}init\PYGZus{}\PYGZus{}}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{p}{,} \PYG{n}{title}\PYG{p}{,} \PYG{n}{year}\PYG{p}{,} \PYG{n}{duration\PYGZus{}in\PYGZus{}minutes}\PYG{p}{,} \PYG{n}{director}\PYG{p}{,} \PYG{n}{genre}\PYG{p}{)}\PYG{p}{:}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{title} \PYG{o}{=} \PYG{n}{title}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{year} \PYG{o}{=} \PYG{n}{year}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{genre} \PYG{o}{=} \PYG{n}{genre}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{duration\PYGZus{}in\PYGZus{}minutes} \PYG{o}{=} \PYG{n}{duration\PYGZus{}in\PYGZus{}minutes}
        \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{director} \PYG{o}{=} \PYG{n}{director}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Movie object created}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxstylestrong{dbinit.py}
dbinit.py is used for database initialization. It runs INIT\_STATEMENTS which has
the purpose to create the tables, USERS, MOVIE, MUSIC.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{INIT\PYGZus{}STATEMENTS} \PYG{o}{=} \PYG{p}{[}
    \PYG{l+s+ss}{\PYGZdq{}DROP TABLE IF EXISTS USERS CASCADE\PYGZdq{}}\PYG{p}{,} \PYG{o}{\PYGZsh{}} \PYG{k}{to} \PYG{n}{test} \PYG{n}{changes} \PYG{n}{quickly}
    \PYG{l+s+ss}{\PYGZdq{}DROP TABLE IF EXISTS MUSIC CASCADE\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+ss}{\PYGZdq{}DROP TABLE IF EXISTS MOVIE CASCADE\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+ss}{\PYGZdq{}DROP TABLE IF EXISTS MUSIC\PYGZus{}LIST CASCADE\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+ss}{\PYGZdq{}DROP TABLE IF EXISTS MOVIE\PYGZus{}LIST CASCADE\PYGZdq{}}\PYG{p}{,}

    \PYG{l+s+ss}{\PYGZdq{}CREATE TABLE IF NOT EXISTS USERS(\PYGZdq{}}
        \PYG{l+s+ss}{\PYGZdq{}ID SERIAL,\PYGZdq{}}
        \PYG{l+s+ss}{\PYGZdq{}USERNAME VARCHAR(30) NOT NULL,\PYGZdq{}}
        \PYG{l+s+ss}{\PYGZdq{}NAME VARCHAR(30),\PYGZdq{}}
        \PYG{l+s+ss}{\PYGZdq{}SURNAME VARCHAR(30),\PYGZdq{}}
        \PYG{l+s+ss}{\PYGZdq{}EMAIL VARCHAR(30),\PYGZdq{}}
        \PYG{l+s+ss}{\PYGZdq{}PASSWORD VARCHAR(100),\PYGZdq{}}
        \PYG{l+s+ss}{\PYGZdq{}AGE VARCHAR(8),\PYGZdq{}}
        \PYG{l+s+ss}{\PYGZdq{}GENDER VARCHAR(15),\PYGZdq{}}
        \PYG{l+s+ss}{\PYGZdq{}PRIMARY KEY(ID)\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{})\PYGZdq{}}\PYG{p}{,}

    \PYG{l+s+ss}{\PYGZdq{}CREATE TABLE IF NOT EXISTS MUSIC(\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}ID SERIAL,\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}NAME VARCHAR(30),\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}GENRE VARCHAR(30),\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}DURATION\PYGZus{}IN\PYGZus{}SECONDS VARCHAR(8),\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}SINGER VARCHAR(30),\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}YEAR VARCHAR(8),\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}PRIMARY KEY(ID)\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{})\PYGZdq{}}\PYG{p}{,}

    \PYG{l+s+ss}{\PYGZdq{}CREATE TABLE IF NOT EXISTS MOVIE(\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}ID SERIAL,\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}TITLE VARCHAR(40),\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}YEAR VARCHAR(8),\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}DURATION\PYGZus{}IN\PYGZus{}MINUTES VARCHAR(8),\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}DIRECTOR VARCHAR(30),\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}GENRE VARCHAR(30),\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}PRIMARY KEY(ID)\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{})\PYGZdq{}}\PYG{p}{,}
\end{sphinxVerbatim}

Notice that USER\_ID and MUSIC\_ID/MOVIE\_ID are the primary keys for these tables.
Also, they got cascading.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{l+s+ss}{\PYGZdq{}CREATE TABLE IF NOT EXISTS MUSIC\PYGZus{}LIST(\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}USER\PYGZus{}ID INTEGER REFERENCES USERS(id) ON DELETE CASCADE,\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}MUSIC\PYGZus{}ID INTEGER REFERENCES MUSIC(id) ON DELETE CASCADE,\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}PRIMARY KEY(USER\PYGZus{}ID, MUSIC\PYGZus{}ID)\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{})\PYGZdq{}}\PYG{p}{,}

    \PYG{l+s+ss}{\PYGZdq{}CREATE TABLE IF NOT EXISTS MOVIE\PYGZus{}LIST(\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}USER\PYGZus{}ID INTEGER REFERENCES USERS(id) ON DELETE CASCADE,\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}MOVIE\PYGZus{}ID INTEGER REFERENCES MOVIE(id) ON DELETE CASCADE,\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{}PRIMARY KEY(USER\PYGZus{}ID, MOVIE\PYGZus{}ID)\PYGZdq{}}
    \PYG{l+s+ss}{\PYGZdq{})\PYGZdq{}}\PYG{p}{,}
\PYG{p}{]}
\end{sphinxVerbatim}

\sphinxstylestrong{forms.py}
forms.py is used to create forms necessary for the related operations.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{class} \PYG{n+nc}{LoginForm}\PYG{p}{(}\PYG{n}{FlaskForm}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{username} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{validators}\PYG{o}{=}\PYG{p}{[}\PYG{n}{DataRequired}\PYG{p}{(}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{password} \PYG{o}{=} \PYG{n}{PasswordField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Password}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{validators}\PYG{o}{=}\PYG{p}{[}\PYG{n}{DataRequired}\PYG{p}{(}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{remember\PYGZus{}me} \PYG{o}{=} \PYG{n}{BooleanField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Remember Me}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
    \PYG{n}{submit} \PYG{o}{=} \PYG{n}{SubmitField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Sign In}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}


\PYG{k}{class} \PYG{n+nc}{RegistrationForm}\PYG{p}{(}\PYG{n}{Form}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{username} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{email} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Email Address}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{4}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{name} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Name}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{surname} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Surname}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{age} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Age}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{gender} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Gender}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{15}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{password} \PYG{o}{=} \PYG{n}{PasswordField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{New Password}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}
        \PYG{n}{validators}\PYG{o}{.}\PYG{n}{DataRequired}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
        \PYG{n}{validators}\PYG{o}{.}\PYG{n}{EqualTo}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{confirm}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{message}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Passwords must match}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
    \PYG{p}{]}\PYG{p}{)}
    \PYG{n}{confirm} \PYG{o}{=} \PYG{n}{PasswordField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Repeat Password}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} MOVIE OPERATIONS}
\PYG{k}{class} \PYG{n+nc}{MovieAddForm}\PYG{p}{(}\PYG{n}{Form}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{title} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Title}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{year} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Year}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{4}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{duration\PYGZus{}in\PYGZus{}minutes} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Duration}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{director} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Director}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{genre} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Genre}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}

\PYG{k}{class} \PYG{n+nc}{MovieUpdateForm}\PYG{p}{(}\PYG{n}{Form}\PYG{p}{)}\PYG{p}{:}
    \PYG{n+nb}{id} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Id of The Movie}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{title} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Title}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{year} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Year}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{4}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{duration\PYGZus{}in\PYGZus{}minutes} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Duration}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{director} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Director}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{genre} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Genre}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}

\PYG{k}{class} \PYG{n+nc}{MovieDeleteForm}\PYG{p}{(}\PYG{n}{Form}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{movie\PYGZus{}id} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{}MUSIC OPERATIONS}
\PYG{k}{class} \PYG{n+nc}{MusicAddForm}\PYG{p}{(}\PYG{n}{Form}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{name} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Name}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{genre} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Genre}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{duration\PYGZus{}in\PYGZus{}seconds} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Duration(seconds)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{singer} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Singer}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{year} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Year}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}

\PYG{k}{class} \PYG{n+nc}{MusicUpdateForm}\PYG{p}{(}\PYG{n}{Form}\PYG{p}{)}\PYG{p}{:}
    \PYG{n+nb}{id} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Id of The Music}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{name} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Name}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{genre} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Genre}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{duration\PYGZus{}in\PYGZus{}seconds} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Duration(seconds)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{singer} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Singer}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{year} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Year}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}

\PYG{k}{class} \PYG{n+nc}{MusicDeleteForm}\PYG{p}{(}\PYG{n}{Form}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{music\PYGZus{}id} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Id}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{p}{[}\PYG{n}{validators}\PYG{o}{.}\PYG{n}{Length}\PYG{p}{(}\PYG{n+nb}{min}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n+nb}{max}\PYG{o}{=}\PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxstylestrong{db\_table\_operations.py}
This file is to execute SQL queries needed for database operations.

Insert a user;

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} USER AUTHENTICATION TABLE OPERATIONS \PYGZsh{}}
\PYG{k}{def} \PYG{n+nf}{insert\PYGZus{}user}\PYG{p}{(}\PYG{n+nb}{object}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{query} \PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{INSERT INTO USERS (USERNAME, NAME, SURNAME, EMAIL, PASSWORD, AGE, GENDER) }\PYG{l+s+s1}{\PYGZsq{}} \PYGZbs{}
           \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VALUES(}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{)}\PYG{l+s+s1}{\PYGZsq{}}
    \PYG{n}{url} \PYG{o}{=} \PYG{n}{get\PYGZus{}db\PYGZus{}url}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{c+c1}{\PYGZsh{} hash the password}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{User pw:}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{+} \PYG{n+nb}{object}\PYG{o}{.}\PYG{n}{password}\PYG{p}{)}
        \PYG{n}{password\PYGZus{}hash} \PYG{o}{=} \PYG{n}{generate\PYGZus{}password\PYGZus{}hash}\PYG{p}{(}\PYG{n+nb}{object}\PYG{o}{.}\PYG{n}{password}\PYG{p}{)}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{User pw:}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{+} \PYG{n}{password\PYGZus{}hash}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{query}\PYG{p}{,} \PYG{p}{(}\PYG{n+nb}{object}\PYG{o}{.}\PYG{n}{username}\PYG{p}{,} \PYG{n+nb}{object}\PYG{o}{.}\PYG{n}{name}\PYG{p}{,} \PYG{n+nb}{object}\PYG{o}{.}\PYG{n}{surname}\PYG{p}{,} \PYG{n+nb}{object}\PYG{o}{.}\PYG{n}{email}\PYG{p}{,}
                               \PYG{n}{password\PYGZus{}hash}\PYG{p}{,} \PYG{n+nb}{object}\PYG{o}{.}\PYG{n}{age}\PYG{p}{,} \PYG{n+nb}{object}\PYG{o}{.}\PYG{n}{gender}\PYG{p}{)}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

object is user object which has fields like username, name, password etc.
They are executed as strings(\%s). Also notice that the password is hashed for security.

Find a user;
Columns are selected with SELECT operation.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{find\PYGZus{}user\PYGZus{}by\PYGZus{}username}\PYG{p}{(}\PYG{n}{username}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{query} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM USERS WHERE USERNAME = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{n}{url} \PYG{o}{=} \PYG{n}{get\PYGZus{}db\PYGZus{}url}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{rows\PYGZus{}count} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{query}\PYG{p}{,}\PYG{p}{(}\PYG{n}{username}\PYG{p}{,}\PYG{p}{)}\PYG{p}{)}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{User is found in DB}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
        \PYG{n}{found\PYGZus{}user} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchone}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{found\PYGZus{}user}


\PYG{k}{def} \PYG{n+nf}{find\PYGZus{}user\PYGZus{}by\PYGZus{}id}\PYG{p}{(}\PYG{n+nb}{id}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{query} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM USERS WHERE ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{n}{url} \PYG{o}{=} \PYG{n}{get\PYGZus{}db\PYGZus{}url}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{rows\PYGZus{}count} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{query}\PYG{p}{,}\PYG{p}{(}\PYG{n+nb}{id}\PYG{p}{,}\PYG{p}{)}\PYG{p}{)}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{User is found in DB}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
        \PYG{n}{found\PYGZus{}user} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchone}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{found\PYGZus{}user}
\end{sphinxVerbatim}

Check password;
Hashed passwords are checked.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{check\PYGZus{}password}\PYG{p}{(}\PYG{n}{user\PYGZus{}password\PYGZus{}hash}\PYG{p}{,} \PYG{n}{form\PYGZus{}password}\PYG{p}{)}\PYG{p}{:}
    \PYG{c+c1}{\PYGZsh{} compare the passwords}
    \PYG{k}{return} \PYG{n}{check\PYGZus{}password\PYGZus{}hash}\PYG{p}{(}\PYG{n}{user\PYGZus{}password\PYGZus{}hash}\PYG{p}{,} \PYG{n}{form\PYGZus{}password}\PYG{p}{)}
\end{sphinxVerbatim}

Add/Update/Delete elements from User Lists (i.e. mylists);

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} USER LIST OPERATIONS}
\PYG{k}{def} \PYG{n+nf}{userlist\PYGZus{}add\PYGZus{}music}\PYG{p}{(}\PYG{n}{user\PYGZus{}id}\PYG{p}{,} \PYG{n}{music\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{query} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{INSERT INTO MUSIC\PYGZus{}LIST (USER\PYGZus{}ID, MUSIC\PYGZus{}ID) VALUES(}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{)}\PYG{l+s+s1}{\PYGZsq{}}
    \PYG{n}{url} \PYG{o}{=} \PYG{n}{get\PYGZus{}db\PYGZus{}url}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{query}\PYG{p}{,} \PYG{p}{(}\PYG{n}{user\PYGZus{}id}\PYG{p}{,} \PYG{n}{music\PYGZus{}id}\PYG{p}{)}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}

\PYG{k}{def} \PYG{n+nf}{userlist\PYGZus{}add\PYGZus{}movie}\PYG{p}{(}\PYG{n}{user\PYGZus{}id}\PYG{p}{,} \PYG{n}{movie\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{query} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{INSERT INTO MOVIE\PYGZus{}LIST (USER\PYGZus{}ID, MOVIE\PYGZus{}ID) VALUES(}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{)}\PYG{l+s+s1}{\PYGZsq{}}
    \PYG{n}{url} \PYG{o}{=} \PYG{n}{get\PYGZus{}db\PYGZus{}url}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{query}\PYG{p}{,} \PYG{p}{(}\PYG{n}{user\PYGZus{}id}\PYG{p}{,} \PYG{n}{movie\PYGZus{}id}\PYG{p}{)}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

User’s lists, i.e, MOVIE\_LIST and MUSIC\_LIST keeps only the ID’s of the movie/music and user.
So it is necessary to use JOIN operation to find out the row related with these ID’s.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{userlist\PYGZus{}get\PYGZus{}movies}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{query} \PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{SELECT MOVIE.* FROM MOVIE\PYGZus{}LIST }\PYG{l+s+s1}{\PYGZsq{}} \PYGZbs{}
           \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{INNER JOIN MOVIE ON MOVIE\PYGZus{}LIST.MOVIE\PYGZus{}ID = MOVIE.ID }\PYG{l+s+s1}{\PYGZsq{}} \PYGZbs{}
           \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{INNER JOIN USERS ON MOVIE\PYGZus{}LIST.USER\PYGZus{}ID = USERS.ID}\PYG{l+s+s1}{\PYGZsq{}}
    \PYG{n}{url} \PYG{o}{=} \PYG{n}{get\PYGZus{}db\PYGZus{}url}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{query}\PYG{p}{)}
        \PYG{n}{movies} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{movies}

\PYG{k}{def} \PYG{n+nf}{userlist\PYGZus{}get\PYGZus{}musics}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{query} \PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{SELECT MUSIC.* FROM MUSIC\PYGZus{}LIST }\PYG{l+s+s1}{\PYGZsq{}} \PYGZbs{}
           \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{INNER JOIN MUSIC ON MUSIC\PYGZus{}LIST.MUSIC\PYGZus{}ID = MUSIC.ID }\PYG{l+s+s1}{\PYGZsq{}} \PYGZbs{}
           \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{INNER JOIN USERS ON MUSIC\PYGZus{}LIST.USER\PYGZus{}ID = USERS.ID}\PYG{l+s+s1}{\PYGZsq{}}
    \PYG{n}{url} \PYG{o}{=} \PYG{n}{get\PYGZus{}db\PYGZus{}url}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{query}\PYG{p}{)}
        \PYG{n}{musics} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{musics}
\end{sphinxVerbatim}

Delete operation finds the element with provided ID and deletes it from the related table.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{userlist\PYGZus{}delete\PYGZus{}movie}\PYG{p}{(}\PYG{n}{user\PYGZus{}id}\PYG{p}{,} \PYG{n}{movie\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{query} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DELETE FROM MOVIE\PYGZus{}LIST WHERE USER\PYGZus{}ID = CAST(}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ AS INTEGER) AND MOVIE\PYGZus{}ID = CAST(}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ AS INTEGER)}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{n}{url} \PYG{o}{=} \PYG{n}{get\PYGZus{}db\PYGZus{}url}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{query}\PYG{p}{,} \PYG{p}{(}\PYG{n}{user\PYGZus{}id}\PYG{p}{,} \PYG{n}{movie\PYGZus{}id}\PYG{p}{)}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Movie with id }\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{+} \PYG{n}{movie\PYGZus{}id} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ from user with id }\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{+} \PYG{n}{user\PYGZus{}id} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ deleted}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}


\PYG{k}{def} \PYG{n+nf}{userlist\PYGZus{}delete\PYGZus{}music}\PYG{p}{(}\PYG{n}{user\PYGZus{}id}\PYG{p}{,} \PYG{n}{music\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{query} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DELETE FROM MUSIC\PYGZus{}LIST WHERE USER\PYGZus{}ID = CAST(}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ AS INTEGER) AND MUSIC\PYGZus{}ID = CAST(}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ AS INTEGER)}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{n}{url} \PYG{o}{=} \PYG{n}{get\PYGZus{}db\PYGZus{}url}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{query}\PYG{p}{,} \PYG{p}{(}\PYG{n}{user\PYGZus{}id}\PYG{p}{,} \PYG{n}{music\PYGZus{}id}\PYG{p}{)}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Music with id }\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{+} \PYG{n}{music\PYGZus{}id} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ from user with id }\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{+} \PYG{n}{user\PYGZus{}id} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ deleted}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

Rest of the MOVIE table operations are similar to the former operations.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} MOVIE TABLE OPERATIONS \PYGZsh{}}
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}movies}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{query} \PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{SELECT * FROM MOVIE}\PYG{l+s+s1}{\PYGZsq{}}
    \PYG{n}{url} \PYG{o}{=} \PYG{n}{get\PYGZus{}db\PYGZus{}url}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{query}\PYG{p}{)}
        \PYG{n}{movies} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{movies}

\PYG{k}{def} \PYG{n+nf}{insert\PYGZus{}movie}\PYG{p}{(}\PYG{n}{movie}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{query} \PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{INSERT INTO MOVIE(TITLE, YEAR, DURATION\PYGZus{}IN\PYGZus{}MINUTES, DIRECTOR, GENRE) VALUES(}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{)}\PYG{l+s+s1}{\PYGZsq{}}
    \PYG{n}{url} \PYG{o}{=} \PYG{n}{get\PYGZus{}db\PYGZus{}url}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{query}\PYG{p}{,} \PYG{p}{(}\PYG{n}{movie}\PYG{o}{.}\PYG{n}{title}\PYG{p}{,} \PYG{n}{movie}\PYG{o}{.}\PYG{n}{year}\PYG{p}{,} \PYG{n}{movie}\PYG{o}{.}\PYG{n}{duration\PYGZus{}in\PYGZus{}minutes}\PYG{p}{,} \PYG{n}{movie}\PYG{o}{.}\PYG{n}{director}\PYG{p}{,} \PYG{n}{movie}\PYG{o}{.}\PYG{n}{genre}\PYG{p}{)}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}

\PYG{k}{def} \PYG{n+nf}{update\PYGZus{}movie}\PYG{p}{(}\PYG{n}{movie\PYGZus{}id}\PYG{p}{,} \PYG{n}{movie}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{query} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{UPDATE MOVIE }\PYG{l+s+s2}{\PYGZdq{}} \PYGZbs{}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SET TITLE = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+s2}{\PYGZdq{}} \PYGZbs{}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{YEAR = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+s2}{\PYGZdq{}} \PYGZbs{}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DURATION\PYGZus{}IN\PYGZus{}MINUTES = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+s2}{\PYGZdq{}} \PYGZbs{}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DIRECTOR = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+s2}{\PYGZdq{}} \PYGZbs{}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{GENRE = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ }\PYG{l+s+s2}{\PYGZdq{}} \PYGZbs{}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{WHERE ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ }\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{n}{url} \PYG{o}{=} \PYG{n}{get\PYGZus{}db\PYGZus{}url}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{query}\PYG{p}{,} \PYG{p}{(}\PYG{n}{movie}\PYG{o}{.}\PYG{n}{title}\PYG{p}{,} \PYG{n}{movie}\PYG{o}{.}\PYG{n}{year}\PYG{p}{,} \PYG{n}{movie}\PYG{o}{.}\PYG{n}{duration\PYGZus{}in\PYGZus{}minutes}\PYG{p}{,}
                              \PYG{n}{movie}\PYG{o}{.}\PYG{n}{director}\PYG{p}{,} \PYG{n}{movie}\PYG{o}{.}\PYG{n}{genre}\PYG{p}{,} \PYG{n}{movie\PYGZus{}id}\PYG{p}{,}\PYG{p}{)}\PYG{p}{)}
        \PYG{c+c1}{\PYGZsh{} id = cursor.fetchone()[0]  \PYGZsh{} get the inserted row\PYGZsq{}s id}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Movie with id }\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{+} \PYG{n}{movie\PYGZus{}id} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ deleted}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
        \PYG{c+c1}{\PYGZsh{} return id}
\end{sphinxVerbatim}

Operations in MUSICS table are pretty the same. Though, they are provided to provide details for SQL operations.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} MUSIC TABLE OPERATIONS \PYGZsh{}}
\PYG{k}{def} \PYG{n+nf}{get\PYGZus{}musics}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{query} \PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{SELECT * FROM MUSIC}\PYG{l+s+s1}{\PYGZsq{}}
    \PYG{n}{url} \PYG{o}{=} \PYG{n}{get\PYGZus{}db\PYGZus{}url}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{query}\PYG{p}{)}
        \PYG{n}{movies} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{movies}


\PYG{k}{def} \PYG{n+nf}{insert\PYGZus{}music}\PYG{p}{(}\PYG{n}{music}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{query} \PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{INSERT INTO MUSIC (NAME, GENRE, DURATION\PYGZus{}IN\PYGZus{}SECONDS, SINGER, YEAR) VALUES(}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{)}\PYG{l+s+s1}{\PYGZsq{}}
    \PYG{n}{url} \PYG{o}{=} \PYG{n}{get\PYGZus{}db\PYGZus{}url}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{query}\PYG{p}{,} \PYG{p}{(}\PYG{n}{music}\PYG{o}{.}\PYG{n}{name}\PYG{p}{,} \PYG{n}{music}\PYG{o}{.}\PYG{n}{genre}\PYG{p}{,} \PYG{n}{music}\PYG{o}{.}\PYG{n}{duration\PYGZus{}in\PYGZus{}seconds}\PYG{p}{,}
                               \PYG{n}{music}\PYG{o}{.}\PYG{n}{singer}\PYG{p}{,} \PYG{n}{music}\PYG{o}{.}\PYG{n}{year}\PYG{p}{)}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}


\PYG{k}{def} \PYG{n+nf}{update\PYGZus{}music}\PYG{p}{(}\PYG{n}{music\PYGZus{}id}\PYG{p}{,} \PYG{n}{music}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{query} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{UPDATE MUSIC }\PYG{l+s+s2}{\PYGZdq{}} \PYGZbs{}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SET NAME = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+s2}{\PYGZdq{}} \PYGZbs{}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{GENRE = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+s2}{\PYGZdq{}} \PYGZbs{}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DURATION\PYGZus{}IN\PYGZus{}SECONDS = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+s2}{\PYGZdq{}} \PYGZbs{}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SINGER = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+s2}{\PYGZdq{}} \PYGZbs{}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{YEAR = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ }\PYG{l+s+s2}{\PYGZdq{}} \PYGZbs{}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{WHERE ID = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ }\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{n}{url} \PYG{o}{=} \PYG{n}{get\PYGZus{}db\PYGZus{}url}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{query}\PYG{p}{,} \PYG{p}{(}\PYG{n}{music}\PYG{o}{.}\PYG{n}{name}\PYG{p}{,} \PYG{n}{music}\PYG{o}{.}\PYG{n}{genre}\PYG{p}{,} \PYG{n}{music}\PYG{o}{.}\PYG{n}{duration\PYGZus{}in\PYGZus{}seconds}\PYG{p}{,}
                               \PYG{n}{music}\PYG{o}{.}\PYG{n}{singer}\PYG{p}{,} \PYG{n}{music}\PYG{o}{.}\PYG{n}{year}\PYG{p}{,} \PYG{n}{music\PYGZus{}id}\PYG{p}{,}\PYG{p}{)}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Music with id }\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{+} \PYG{n}{music\PYGZus{}id} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ deleted}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

\PYG{k}{def} \PYG{n+nf}{delete\PYGZus{}music}\PYG{p}{(}\PYG{n}{music\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{query} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DELETE FROM MUSIC WHERE ID = CAST(}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ AS INTEGER)}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{n}{url} \PYG{o}{=} \PYG{n}{get\PYGZus{}db\PYGZus{}url}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{with} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{url}\PYG{p}{)} \PYG{k}{as} \PYG{n}{connection}\PYG{p}{:}
        \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{query}\PYG{p}{,} \PYG{p}{(}\PYG{n}{music\PYGZus{}id}\PYG{p}{,}\PYG{p}{)}\PYG{p}{)}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Music with id }\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{+} \PYG{n}{music\PYGZus{}id} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ deleted}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

Lastly, config.py has the secret key for security.


\section{HTML/CSS}
\label{\detokenize{developer/index:html-css}}
There are a differentiated HTML code for each page. Though, they all share the common one,
layout.html. Let’s start with it.

Let’s start with CSS part of the layout.html.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{.}\PYG{o}{.} \PYG{n}{code}\PYG{o}{\PYGZhy{}}\PYG{n}{block}\PYG{p}{:}\PYG{p}{:} \PYG{n}{python}

        \PYG{o}{\PYGZlt{}}\PYG{n}{style}\PYG{o}{\PYGZgt{}}
     \PYG{n}{html}\PYG{p}{,} \PYG{n}{body}\PYG{p}{,} \PYG{n}{h1}\PYG{p}{,} \PYG{n}{h2}\PYG{p}{,} \PYG{n}{h3}\PYG{p}{,} \PYG{n}{h4}\PYG{p}{,} \PYG{n}{h5}\PYG{p}{,} \PYG{n}{h6} \PYG{p}{\PYGZob{}}
     \PYG{n}{font}\PYG{o}{\PYGZhy{}}\PYG{n}{family}\PYG{p}{:} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Hammersmith One}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{serif}\PYG{p}{;}
     \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

The code part above, font is determined. Then the rest of the code layouts the general style.
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{o}{*} \PYG{p}{\PYGZob{}}
  \PYG{n}{box}\PYG{o}{\PYGZhy{}}\PYG{n}{sizing}\PYG{p}{:} \PYG{n}{border}\PYG{o}{\PYGZhy{}}\PYG{n}{box}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}

\PYG{o}{/}\PYG{o}{*} \PYG{n}{Create} \PYG{n}{two} \PYG{n}{equal} \PYG{n}{columns} \PYG{n}{that} \PYG{n}{floats} \PYG{n+nb}{next} \PYG{n}{to} \PYG{n}{each} \PYG{n}{other} \PYG{o}{*}\PYG{o}{/}
\PYG{o}{.}\PYG{n}{column} \PYG{p}{\PYGZob{}}
  \PYG{n+nb}{float}\PYG{p}{:} \PYG{n}{left}\PYG{p}{;}
  \PYG{n}{padding}\PYG{p}{:} \PYG{l+m+mi}{10}\PYG{n}{px}\PYG{p}{;}
  \PYG{n}{padding}\PYG{o}{\PYGZhy{}}\PYG{n}{right}\PYG{p}{:} \PYG{l+m+mi}{15}\PYG{n}{px}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}

\PYG{o}{.}\PYG{n}{left} \PYG{p}{\PYGZob{}}
  \PYG{n}{width}\PYG{p}{:} \PYG{l+m+mi}{85}\PYG{o}{\PYGZpc{}}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}

\PYG{o}{.}\PYG{n}{right} \PYG{p}{\PYGZob{}}
  \PYG{n}{width}\PYG{p}{:} \PYG{l+m+mi}{15}\PYG{o}{\PYGZpc{}}
\PYG{p}{\PYGZcb{}}

\PYG{p}{\PYGZob{}}\PYG{c+c1}{\PYGZsh{} responsive to screen size \PYGZsh{}\PYGZcb{}}
\PYG{n+nd}{@media} \PYG{n}{screen} \PYG{o+ow}{and} \PYG{p}{(}\PYG{n+nb}{max}\PYG{o}{\PYGZhy{}}\PYG{n}{width}\PYG{p}{:} \PYG{l+m+mi}{600}\PYG{n}{px}\PYG{p}{)} \PYG{p}{\PYGZob{}}
  \PYG{o}{.}\PYG{n}{column} \PYG{p}{\PYGZob{}}
    \PYG{n}{width}\PYG{p}{:} \PYG{l+m+mi}{100}\PYG{o}{\PYGZpc{}}\PYG{p}{;}
  \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}

\PYG{o}{/}\PYG{o}{*} \PYG{n}{Clear} \PYG{n}{floats} \PYG{n}{after} \PYG{n}{the} \PYG{n}{columns} \PYG{o}{*}\PYG{o}{/}
\PYG{o}{.}\PYG{n}{row}\PYG{p}{:}\PYG{n}{after} \PYG{p}{\PYGZob{}}
  \PYG{n}{content}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{;}
  \PYG{n}{display}\PYG{p}{:} \PYG{n}{table}\PYG{p}{;}
  \PYG{n}{clear}\PYG{p}{:} \PYG{n}{both}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{style}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}
\end{quote}

Below you can see the jquery and Bootstrap scripts initializations.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZlt{}}\PYG{n+nt}{script} \PYG{n+na}{src}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js\PYGZdq{}}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{script}\PYG{p}{\PYGZgt{}}
\PYG{p}{\PYGZlt{}}\PYG{n+nt}{script} \PYG{n+na}{src}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\PYGZdq{}}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{script}\PYG{p}{\PYGZgt{}}
\end{sphinxVerbatim}

Now we create “title” block which will be different for each page.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZlt{}}\PYG{n+nt}{title}\PYG{p}{\PYGZgt{}}\PYGZob{}\PYGZpc{} block title \PYGZpc{}\PYGZcb{}\PYGZob{}\PYGZpc{} endblock \PYGZpc{}\PYGZcb{}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{title}\PYG{p}{\PYGZgt{}}
\end{sphinxVerbatim}

After, we create our menu. It is designed as two lines. The first one consists of
couple links for necessary redirections. Because it’s same for all the pages, it is not
labeled as block, as in the second menu bar. Second menu bar includes links to the community lists.
It also has a welcome message with included username. Because it’s only necessary for mylists page
it is labeled as secondmenubar.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZlt{}}\PYG{n+nt}{div} \PYG{n+na}{class}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}w3\PYGZhy{}bar w3\PYGZhy{}text\PYGZhy{}yellow w3\PYGZhy{}large\PYGZdq{}}\PYG{p}{\PYGZgt{}}
    \PYG{p}{\PYGZlt{}}\PYG{n+nt}{h5}\PYG{p}{\PYGZgt{}}
        \PYG{p}{\PYGZlt{}}\PYG{n+nt}{a} \PYG{n+na}{href}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}/mylists\PYGZdq{}}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{button} \PYG{n+na}{class}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}w3\PYGZhy{}bar\PYGZhy{}item w3\PYGZhy{}button w3\PYGZhy{}right\PYGZdq{}}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{b}\PYG{p}{\PYGZgt{}}Your Lists\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{b}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{button}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{a}\PYG{p}{\PYGZgt{}}
        \PYG{p}{\PYGZlt{}}\PYG{n+nt}{a} \PYG{n+na}{href}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}/signup\PYGZdq{}}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{button} \PYG{n+na}{class}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}w3\PYGZhy{}bar\PYGZhy{}item w3\PYGZhy{}button w3\PYGZhy{}right\PYGZdq{}}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{b}\PYG{p}{\PYGZgt{}}Sign up\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{b}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{button}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{a}\PYG{p}{\PYGZgt{}}
        \PYG{p}{\PYGZlt{}}\PYG{n+nt}{a} \PYG{n+na}{href}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}/signin\PYGZdq{}}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{button} \PYG{n+na}{class}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}w3\PYGZhy{}bar\PYGZhy{}item w3\PYGZhy{}button w3\PYGZhy{}right\PYGZdq{}}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{b}\PYG{p}{\PYGZgt{}}Sign in\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{b}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{button}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{a}\PYG{p}{\PYGZgt{}}
        \PYG{p}{\PYGZlt{}}\PYG{n+nt}{a} \PYG{n+na}{href}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}/\PYGZdq{}}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{button} \PYG{n+na}{class}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}w3\PYGZhy{}bar\PYGZhy{}item w3\PYGZhy{}button w3\PYGZhy{}left\PYGZdq{}}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{b}\PYG{p}{\PYGZgt{}}Intellect\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{b}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{button}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{a}\PYG{p}{\PYGZgt{}}
    \PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{h5}\PYG{p}{\PYGZgt{}}
\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{div}\PYG{p}{\PYGZgt{}}

\PYGZob{}\PYGZpc{} block secondmenubar \PYGZpc{}\PYGZcb{}
\PYG{p}{\PYGZlt{}}\PYG{n+nt}{div} \PYG{n+na}{class}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}w3\PYGZhy{}bar w3\PYGZhy{}text\PYGZhy{}brown w3\PYGZhy{}large w3\PYGZhy{}border\PYGZhy{}top w3\PYGZhy{}border\PYGZhy{}bottom\PYGZdq{}}\PYG{p}{\PYGZgt{}}
    \PYG{p}{\PYGZlt{}}\PYG{n+nt}{h5}\PYG{p}{\PYGZgt{}}
        \PYG{p}{\PYGZlt{}}\PYG{n+nt}{a} \PYG{n+na}{href}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}/mylists\PYGZdq{}}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{button} \PYG{n+na}{class}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}w3\PYGZhy{}bar\PYGZhy{}item w3\PYGZhy{}button w3\PYGZhy{}left\PYGZdq{}}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{b}\PYG{p}{\PYGZgt{}}My Lists\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{b}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{button}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{a}\PYG{p}{\PYGZgt{}}
        \PYG{p}{\PYGZlt{}}\PYG{n+nt}{a} \PYG{n+na}{href}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}/mylists/movies\PYGZdq{}}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{button} \PYG{n+na}{class}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}w3\PYGZhy{}bar\PYGZhy{}item w3\PYGZhy{}button w3\PYGZhy{}left\PYGZdq{}}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{b}\PYG{p}{\PYGZgt{}}Community Movies\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{b}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{button}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{a}\PYG{p}{\PYGZgt{}}
        \PYG{p}{\PYGZlt{}}\PYG{n+nt}{a} \PYG{n+na}{href}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}/mylists/musics\PYGZdq{}}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{button} \PYG{n+na}{class}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}w3\PYGZhy{}bar\PYGZhy{}item w3\PYGZhy{}button w3\PYGZhy{}left\PYGZdq{}}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{b}\PYG{p}{\PYGZgt{}}Community Musics\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{b}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{button}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{a}\PYG{p}{\PYGZgt{}}
        \PYG{p}{\PYGZlt{}}\PYG{n+nt}{button} \PYG{n+na}{class}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}w3\PYGZhy{}bar\PYGZhy{}item w3\PYGZhy{}button w3\PYGZhy{}right\PYGZdq{}}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{b}\PYG{p}{\PYGZgt{}}Welcome \PYGZob{}\PYGZob{} current\PYGZus{}user[2] \PYGZcb{}\PYGZcb{}!\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{b}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{button}\PYG{p}{\PYGZgt{}}
    \PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{h5}\PYG{p}{\PYGZgt{}}
\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{div}\PYG{p}{\PYGZgt{}}
\PYGZob{}\PYGZpc{} endblock \PYGZpc{}\PYGZcb{}
\end{sphinxVerbatim}

Then create a block for body. It’s empty for the homepage.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZlt{}}\PYG{n+nt}{body}\PYG{p}{\PYGZgt{}}
    \PYGZob{}\PYGZpc{} block content \PYGZpc{}\PYGZcb{}\PYGZob{}\PYGZpc{}  endblock \PYGZpc{}\PYGZcb{}
\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{body}\PYG{p}{\PYGZgt{}}
\end{sphinxVerbatim}

Create the footer;

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZob{}   \PYGZpc{} block footer \PYGZpc{}\PYGZcb{}
\PYG{p}{\PYGZlt{}}\PYG{n+nt}{footer} \PYG{n+na}{class}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}w3\PYGZhy{}bottom w3\PYGZhy{}container w3\PYGZhy{}text\PYGZhy{}gray\PYGZdq{}}\PYG{p}{\PYGZgt{}}
    \PYG{p}{\PYGZlt{}}\PYG{n+nt}{p}\PYG{p}{\PYGZgt{}}Developed by Hakan Eroztekin\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{p}\PYG{p}{\PYGZgt{}}
\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{footer}\PYG{p}{\PYGZgt{}}
\PYGZob{}\PYGZpc{} endblock \PYGZpc{}\PYGZcb{}
\end{sphinxVerbatim}

Block for additional styles;

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZob{}\PYGZpc{} block additional\PYGZus{}styles \PYGZpc{}\PYGZcb{}
\PYG{p}{\PYGZlt{}}\PYG{n+nt}{style}\PYG{p}{\PYGZgt{}}
   \PYG{n+nt}{body} \PYG{p}{\PYGZob{}}
    \PYG{k}{padding\PYGZhy{}left}\PYG{p}{:} \PYG{l+m+mi}{10}\PYG{k+kt}{px}\PYG{p}{;}
   \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{style}\PYG{p}{\PYGZgt{}}
\PYGZob{}\PYGZpc{} endblock \PYGZpc{}\PYGZcb{}
\end{sphinxVerbatim}

That’s it for layout.html. All the other pages are derived from this page. While it is common, they differ in contents in the blocks.
There are 12 more html pages.
\begin{itemize}
\item {} 
\sphinxstylestrong{User Authentication:} signup.html, signin.html

\item {} 
\sphinxstylestrong{Homepage:} homepage.html

\item {} 
\sphinxstylestrong{User Lists:} mylists.html

\item {} 
\sphinxstylestrong{Community Lists for Movies:} movies.html, add\_movies.html, update\_movies.html, delete\_movies.html

\item {} 
\sphinxstylestrong{Community Lists for Musics:} musics.html, add\_musics.html, update\_musics.html, delete\_musics.html

\end{itemize}

Almost all the pages are created to work with forms. The forms has fields according to the related database tables.

\sphinxstylestrong{User Authentication} \sphinxstyleemphasis{signup.html}
The technical part of the page can be seen below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZob{}\PYGZpc{} block content \PYGZpc{}\PYGZcb{}
        \PYG{p}{\PYGZlt{}}\PYG{n+nt}{h1}\PYG{p}{\PYGZgt{}}Sign\PYGZhy{}up to Intellect\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{h1}\PYG{p}{\PYGZgt{}}
    \PYG{p}{\PYGZlt{}}\PYG{n+nt}{form} \PYG{n+na}{method}\PYG{o}{=}\PYG{l+s}{post}\PYG{p}{\PYGZgt{}}
  \PYG{p}{\PYGZlt{}}\PYG{n+nt}{dl}\PYG{p}{\PYGZgt{}}
    \PYGZob{}\PYGZob{} render\PYGZus{}field(form.username) \PYGZcb{}\PYGZcb{}
    \PYGZob{}\PYGZob{} render\PYGZus{}field(form.email) \PYGZcb{}\PYGZcb{}
    \PYGZob{}\PYGZob{} render\PYGZus{}field(form.name) \PYGZcb{}\PYGZcb{}
    \PYGZob{}\PYGZob{} render\PYGZus{}field(form.surname) \PYGZcb{}\PYGZcb{}
    \PYGZob{}\PYGZob{} render\PYGZus{}field(form.age) \PYGZcb{}\PYGZcb{}
    \PYGZob{}\PYGZob{} render\PYGZus{}field(form.gender) \PYGZcb{}\PYGZcb{}
    \PYGZob{}\PYGZob{} render\PYGZus{}field(form.password) \PYGZcb{}\PYGZcb{}
    \PYGZob{}\PYGZob{} render\PYGZus{}field(form.confirm) \PYGZcb{}\PYGZcb{}
  \PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{dl}\PYG{p}{\PYGZgt{}}
  \PYG{p}{\PYGZlt{}}\PYG{n+nt}{p}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{input} \PYG{n+na}{type}\PYG{o}{=}\PYG{l+s}{submit} \PYG{n+na}{value}\PYG{o}{=}\PYG{l+s}{Register}\PYG{p}{\PYGZgt{}}

\PYGZob{}\PYGZpc{} endblock \PYGZpc{}\PYGZcb{}
\end{sphinxVerbatim}

Each form element is rendered in the html.

\sphinxstylestrong{User Authentication} \sphinxstyleemphasis{signin.html}
In sign-in,  username and password is asked. Also, there is an option to “Remember” the user later on.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZob{}\PYGZpc{} block title \PYGZpc{}\PYGZcb{} Sign\PYGZhy{}in for Intellect \PYGZob{}\PYGZpc{} endblock \PYGZpc{}\PYGZcb{}
\PYGZob{}\PYGZpc{} block content \PYGZpc{}\PYGZcb{}
    \PYG{p}{\PYGZlt{}}\PYG{n+nt}{h1}\PYG{p}{\PYGZgt{}}Log In To Intellect\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{h1}\PYG{p}{\PYGZgt{}}
    \PYG{p}{\PYGZlt{}}\PYG{n+nt}{form} \PYG{n+na}{action}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}\PYGZdq{}} \PYG{n+na}{method}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}post\PYGZdq{}} \PYG{n+na}{novalidate}\PYG{p}{\PYGZgt{}}
        \PYGZob{}\PYGZob{} form.hidden\PYGZus{}tag() \PYGZcb{}\PYGZcb{}
        \PYG{p}{\PYGZlt{}}\PYG{n+nt}{p}\PYG{p}{\PYGZgt{}}
            \PYGZob{}\PYGZob{} form.username.label \PYGZcb{}\PYGZcb{}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{br}\PYG{p}{\PYGZgt{}}
            \PYGZob{}\PYGZob{} form.username(size=32) \PYGZcb{}\PYGZcb{}
        \PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{p}\PYG{p}{\PYGZgt{}}
        \PYG{p}{\PYGZlt{}}\PYG{n+nt}{p}\PYG{p}{\PYGZgt{}}
            \PYGZob{}\PYGZob{} form.password.label \PYGZcb{}\PYGZcb{}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{br}\PYG{p}{\PYGZgt{}}
            \PYGZob{}\PYGZob{} form.password(size=32) \PYGZcb{}\PYGZcb{}
        \PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{p}\PYG{p}{\PYGZgt{}}
        \PYG{p}{\PYGZlt{}}\PYG{n+nt}{p}\PYG{p}{\PYGZgt{}}\PYGZob{}\PYGZob{} form.remember\PYGZus{}me() \PYGZcb{}\PYGZcb{} \PYGZob{}\PYGZob{} form.remember\PYGZus{}me.label \PYGZcb{}\PYGZcb{}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{p}\PYG{p}{\PYGZgt{}}
        \PYG{p}{\PYGZlt{}}\PYG{n+nt}{p}\PYG{p}{\PYGZgt{}}\PYGZob{}\PYGZob{} form.submit() \PYGZcb{}\PYGZcb{}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{p}\PYG{p}{\PYGZgt{}}
    \PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{form}\PYG{p}{\PYGZgt{}}
    \PYGZob{}\PYGZpc{} if error \PYGZpc{}\PYGZcb{}
        \PYG{p}{\PYGZlt{}}\PYG{n+nt}{p} \PYG{n+na}{class}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}error\PYGZdq{}}\PYG{p}{\PYGZgt{}}ERROR: \PYGZob{}\PYGZob{} error \PYGZcb{}\PYGZcb{}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{p}\PYG{p}{\PYGZgt{}}
    \PYGZob{}\PYGZpc{} endif \PYGZpc{}\PYGZcb{}

\PYGZob{}\PYGZpc{} endblock \PYGZpc{}\PYGZcb{}
\end{sphinxVerbatim}

\sphinxstylestrong{Homepage} \sphinxstyleemphasis{homepage.html}
Homepage has a difference in the additional styles here. A specific background image is implemented.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZob{}\PYGZpc{} block additional\PYGZus{}styles \PYGZpc{}\PYGZcb{}
    \PYGZlt{}meta name=\PYGZdq{}viewport\PYGZdq{} content=\PYGZdq{}width=device\PYGZhy{}width, initial\PYGZhy{}scale=1\PYGZdq{}\PYGZgt{}
    \PYGZlt{}style\PYGZgt{}
       body \PYGZob{}
            background\PYGZhy{}image: url(\PYGZsq{}/static/image/bg.jpg\PYGZsq{});
            height: 100\PYGZpc{};
            background\PYGZhy{}repeat: no\PYGZhy{}repeat;
            background\PYGZhy{}size: cover;
            position: relative;
       \PYGZcb{}
    \PYGZlt{}/style\PYGZgt{}

\PYGZob{}\PYGZpc{} endblock \PYGZpc{}\PYGZcb{}
\end{sphinxVerbatim}

At this point, the remaining pages are the following,
- \sphinxstylestrong{User Lists:} mylists.html
- \sphinxstylestrong{Community Lists for Movies:} movies.html, add\_movies.html, update\_movies.html, delete\_movies.html
- \sphinxstylestrong{Community Lists for Musics:} musics.html, add\_musics.html, update\_musics.html, delete\_musics.html

Because the operation is very similar, to keep the documentation neat, only the technical parts will be
discussed.

\sphinxstylestrong{User Lists:} mylists.html
MyLists is the page shows user’s own lists. It creates table and fills it with user\_movies list.
user\_movies is provided to html in server.py.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZob{}\PYGZpc{} if user\PYGZus{}movies \PYGZpc{}\PYGZcb{}
     \PYG{p}{\PYGZlt{}}\PYG{n+nt}{table} \PYG{n+na}{class}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}w3\PYGZhy{}table\PYGZhy{}all\PYGZdq{}}\PYG{p}{\PYGZgt{}}
       \PYG{p}{\PYGZlt{}}\PYG{n+nt}{thead}\PYG{p}{\PYGZgt{}}
         \PYG{p}{\PYGZlt{}}\PYG{n+nt}{tr} \PYG{n+na}{class}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}w3\PYGZhy{}orange\PYGZdq{}}\PYG{p}{\PYGZgt{}}
           \PYG{p}{\PYGZlt{}}\PYG{n+nt}{th}\PYG{p}{\PYGZgt{}}\PYGZsh{}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{th}\PYG{p}{\PYGZgt{}}
           \PYG{p}{\PYGZlt{}}\PYG{n+nt}{th}\PYG{p}{\PYGZgt{}}Title\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{th}\PYG{p}{\PYGZgt{}}
           \PYG{p}{\PYGZlt{}}\PYG{n+nt}{th}\PYG{p}{\PYGZgt{}}Year\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{th}\PYG{p}{\PYGZgt{}}
           \PYG{p}{\PYGZlt{}}\PYG{n+nt}{th}\PYG{p}{\PYGZgt{}}Duration\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{th}\PYG{p}{\PYGZgt{}}
           \PYG{p}{\PYGZlt{}}\PYG{n+nt}{th}\PYG{p}{\PYGZgt{}}Director\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{th}\PYG{p}{\PYGZgt{}}
           \PYG{p}{\PYGZlt{}}\PYG{n+nt}{th}\PYG{p}{\PYGZgt{}}Genre\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{th}\PYG{p}{\PYGZgt{}}
           \PYG{p}{\PYGZlt{}}\PYG{n+nt}{th}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{th}\PYG{p}{\PYGZgt{}}
         \PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{tr}\PYG{p}{\PYGZgt{}}
       \PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{thead}\PYG{p}{\PYGZgt{}}
          \PYGZob{}\PYGZpc{} for movie in user\PYGZus{}movies \PYGZpc{}\PYGZcb{}
       \PYG{p}{\PYGZlt{}}\PYG{n+nt}{tr} \PYG{n+na}{class}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}w3\PYGZhy{}text\PYGZhy{}black\PYGZdq{}}\PYG{p}{\PYGZgt{}}
         \PYG{p}{\PYGZlt{}}\PYG{n+nt}{td}\PYG{p}{\PYGZgt{}}\PYGZob{}\PYGZob{} movie[0] \PYGZcb{}\PYGZcb{}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{td}\PYG{p}{\PYGZgt{}}
         \PYG{p}{\PYGZlt{}}\PYG{n+nt}{td}\PYG{p}{\PYGZgt{}}\PYGZob{}\PYGZob{} movie[1] \PYGZcb{}\PYGZcb{}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{td}\PYG{p}{\PYGZgt{}}
         \PYG{p}{\PYGZlt{}}\PYG{n+nt}{td}\PYG{p}{\PYGZgt{}}\PYGZob{}\PYGZob{} movie[2] \PYGZcb{}\PYGZcb{}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{td}\PYG{p}{\PYGZgt{}}
         \PYG{p}{\PYGZlt{}}\PYG{n+nt}{td}\PYG{p}{\PYGZgt{}}\PYGZob{}\PYGZob{} movie[3] \PYGZcb{}\PYGZcb{}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{td}\PYG{p}{\PYGZgt{}}
         \PYG{p}{\PYGZlt{}}\PYG{n+nt}{td}\PYG{p}{\PYGZgt{}}\PYGZob{}\PYGZob{} movie[4] \PYGZcb{}\PYGZcb{}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{td}\PYG{p}{\PYGZgt{}}
         \PYG{p}{\PYGZlt{}}\PYG{n+nt}{td}\PYG{p}{\PYGZgt{}}\PYGZob{}\PYGZob{} movie[5] \PYGZcb{}\PYGZcb{}\PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{td}\PYG{p}{\PYGZgt{}}

           \PYG{p}{\PYGZlt{}}\PYG{n+nt}{form} \PYG{n+na}{method}\PYG{o}{=}\PYG{l+s}{post}\PYG{p}{\PYGZgt{}}

                \PYGZob{}\PYGZsh{} get movie id\PYGZsh{}\PYGZcb{}

               \PYG{p}{\PYGZlt{}}\PYG{n+nt}{td}\PYG{p}{\PYGZgt{}}
                   \PYG{p}{\PYGZlt{}}\PYG{n+nt}{input} \PYG{n+na}{type}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}hidden\PYGZdq{}} \PYG{n+na}{name}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}movie\PYGZus{}id\PYGZdq{}} \PYG{n+na}{value}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}\PYGZob{}\PYGZob{} movie[0] \PYGZcb{}\PYGZcb{}\PYGZdq{}}\PYG{p}{\PYGZgt{}}
                   \PYG{p}{\PYGZlt{}}\PYG{n+nt}{input} \PYG{n+na}{type}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}hidden\PYGZdq{}} \PYG{n+na}{name}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}user\PYGZus{}id\PYGZdq{}} \PYG{n+na}{value}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}\PYGZob{}\PYGZob{} current\PYGZus{}user[0] \PYGZcb{}\PYGZcb{}\PYGZdq{}}\PYG{p}{\PYGZgt{}}
                   \PYG{p}{\PYGZlt{}}\PYG{n+nt}{input} \PYG{n+na}{type}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}hidden\PYGZdq{}} \PYG{n+na}{name}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}music\PYGZus{}id\PYGZdq{}} \PYG{n+na}{value}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}0\PYGZdq{}}\PYG{p}{\PYGZgt{}}
                   \PYG{p}{\PYGZlt{}}\PYG{n+nt}{input} \PYG{n+na}{type}\PYG{o}{=}\PYG{l+s}{submit} \PYG{n+na}{value}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}Delete\PYGZdq{}}\PYG{p}{\PYGZgt{}}
               \PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{td}\PYG{p}{\PYGZgt{}}
           \PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{form}\PYG{p}{\PYGZgt{}}

       \PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{tr}\PYG{p}{\PYGZgt{}}
     \PYGZob{}\PYGZpc{} endfor \PYGZpc{}\PYGZcb{}
     \PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{table}\PYG{p}{\PYGZgt{}}
   \PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{div}\PYG{p}{\PYGZgt{}}
       \PYGZob{}\PYGZpc{} endif \PYGZpc{}\PYGZcb{}
\end{sphinxVerbatim}

The very same operation is realized for movies.html and musics.html.
\begin{itemize}
\item {} 
\sphinxstylestrong{Community Lists for Movies \& Musics :}

\end{itemize}

Adding, updating and deleting movies and music operations are pretty similar.
They process the form fields as text boxes, and with the click of the button,
the information is transfered to the related variable and it’s processed in the database.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZlt{}}\PYG{n+nt}{form} \PYG{n+na}{method}\PYG{o}{=}\PYG{l+s}{post}\PYG{p}{\PYGZgt{}}
     \PYG{p}{\PYGZlt{}}\PYG{n+nt}{dl}\PYG{p}{\PYGZgt{}}
       \PYGZob{}\PYGZob{} render\PYGZus{}field(form.title) \PYGZcb{}\PYGZcb{}
       \PYGZob{}\PYGZob{} render\PYGZus{}field(form.year) \PYGZcb{}\PYGZcb{}
       \PYGZob{}\PYGZob{} render\PYGZus{}field(form.duration\PYGZus{}in\PYGZus{}minutes) \PYGZcb{}\PYGZcb{}
       \PYGZob{}\PYGZob{} render\PYGZus{}field(form.director) \PYGZcb{}\PYGZcb{}
       \PYGZob{}\PYGZob{} render\PYGZus{}field(form.genre) \PYGZcb{}\PYGZcb{}
     \PYG{p}{\PYGZlt{}}\PYG{p}{/}\PYG{n+nt}{dl}\PYG{p}{\PYGZgt{}}
     \PYG{p}{\PYGZlt{}}\PYG{n+nt}{p}\PYG{p}{\PYGZgt{}}\PYG{p}{\PYGZlt{}}\PYG{n+nt}{input} \PYG{n+na}{type}\PYG{o}{=}\PYG{l+s}{submit} \PYG{n+na}{value}\PYG{o}{=}\PYG{l+s}{\PYGZdq{}Add Movie\PYGZdq{}}\PYG{p}{\PYGZgt{}}
\end{sphinxVerbatim}


\subsection{Parts Implemented by Member Name}
\label{\detokenize{developer/member1:parts-implemented-by-member-name}}\label{\detokenize{developer/member1::doc}}
All the parts are implemented by Hakan Eröztekin.



\renewcommand{\indexname}{Index}
\printindex
\end{document}